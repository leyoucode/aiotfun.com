<button
  id="back-to-top"
  class="fixed bottom-6 right-6 z-50 flex h-10 w-10 items-center justify-center rounded-full border border-border bg-card-bg shadow-card text-text-muted hover:text-accent transition-all duration-300 opacity-0 translate-y-4 pointer-events-none"
  aria-label="Back to top"
>
  <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
    <path d="M5 15l7-7 7 7"/>
  </svg>
</button>

<script>
  document.addEventListener('astro:page-load', () => {
    const btn = document.getElementById('back-to-top');
    if (!btn || btn.dataset.init) return;
    btn.dataset.init = 'true';

    function toggle() {
      if (window.scrollY > 300) {
        btn!.classList.remove('opacity-0', 'translate-y-4', 'pointer-events-none');
        btn!.classList.add('opacity-100', 'translate-y-0');
      } else {
        btn!.classList.add('opacity-0', 'translate-y-4', 'pointer-events-none');
        btn!.classList.remove('opacity-100', 'translate-y-0');
      }
    }

    window.addEventListener('scroll', toggle, { passive: true });
    toggle();

    btn.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  });
</script>
