---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import ArticleCard from '../../../components/ArticleCard.astro';
import { getArticlesByTag } from '../../../utils/articles';
import { useTranslations, localePath } from '../../../utils/i18n';

const locale = 'zh';
const t = useTranslations(locale);
const articles = await getArticlesByTag('weekly', locale);
const wp = (t as any).weekly_page;
---

<BaseLayout title={`${wp.title} — AIoTFun`} description={wp.description}>
  <div class="mx-auto max-w-content px-4 md:px-6 py-8">
    <a href={localePath('/', locale)} class="inline-flex items-center gap-1 text-sm text-text-muted hover:text-accent transition-colors mb-6">
      {wp.back_home}
    </a>

    <div class="mb-8">
      <h1 class="font-display text-3xl md:text-4xl font-bold text-text mb-3">
        {wp.title}
      </h1>
      <p class="text-text-muted">
        {wp.description}
      </p>
    </div>

    {articles.length > 0 ? (
      <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {articles.map((article) => (
          <ArticleCard article={article} variant="medium" />
        ))}
      </div>
    ) : (
      <div class="text-center py-16">
        <p class="text-text-muted text-lg">暂无周刊文章。</p>
      </div>
    )}
  </div>
</BaseLayout>
